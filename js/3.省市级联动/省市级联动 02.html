<!DOCTYPE html>
<html>
<head>
<meta charset="UTP-8">
<title>省市级联动02</title>
<style type="text/css">


</style>
</head>
<body>
<div>
	<fieldset>
	<form name="myform" id="myform">
		<label for="addr-show">您选择的是：
			<input type="text" value="" id="addrShow"> 
		</label>
		</br>

		<!--省份选择-->
		<select id="selProvince"  onchange="changeCity(this)">
			<option value="">=请选择省份=</option>
			
		</select>
		<!--城市选择-->
		<select id="selCity" onchange="changeDis(this)">
			<option value=" ">=请选择城市=</option>
		 </select>	
		<!--县区选择-->
		<select id="selDis">
			<option value=" ">=请选择县区=</option>
			
		</select>
		<button type="button" onClick="showAddr()">确认</button>
	</form>
	</fieldset>
</div>
</body>

</html>

<script type="text/javascript">
var provinces=['湖北省','湖南省','广州省']; 
var cities=[
	['武汉市','黄冈市'],
	['长沙市','株洲市'],
	['广州市','深圳市']
	];
var districts=[
	[ 
		['武昌区','洪山区'],
		['黄州区','英山县']
	],
	[
		['芙蓉区','天兴区'],
		['荷塘区','石峰区']
	],
	[
		['白云区','越秀区'],
		['福田区','罗湖区']
	],
	];
var pIndex=1;
var provEle=document.querySelector("#selProvince");
var cityEle=document.querySelector("#selCity");
var disEle=document.querySelector("#selDis");
//先设置省的值
for(var i=0;i<provinces.length;i++){
	 //声明option.<option value="provinces[i]">provinces[i]</option>
	var opti=new Option(provinces[i],i)
	//添加
	provEle.options.add(opti);
	}
	
function changeCity(obj){
	if(obj.value==1){
	cityEle.options.length=0;
	disEle.options.length=0;
	}
//获取值
var val=obj.value;
pIndex=obj.value; 
//获取city
var cs=cities[val];
 //获取默认区
var as=districts[val][0];

//先清空市
    cityEle.options.length = 0;
    disEle.options.length = 0;

for (var i = 0; i < cs.length; i++) {
	var opti = new Option(cs[i], i);
	cityEle.options.add(opti);
	}
for (var i = 0; i < as.length; i++) {
        var opti = new Option(as[i], i);
        disEle.options.add(opti);
    }	
}


function changeDis(obj)
{
	var val = obj.selectedIndex;
	 var as = districts[pIndex][val];
	disEle.options.length=0;
	 for (var i = 0; i < as.length; i++) {
	console.log(as.length);
                 var opti = new Option(as[i], i);
                 disEle.options.add(opti);
	}	
} 
//确认提交 
function showAddr(){
	var provEle=document.querySelector("#selProvince");
	var cityEle=document.querySelector("#selCity");
	var disEle=document.querySelector("#selDis");
	
	console.log(provEle.value);	
	console.log(cityEle.value);
	console.log(disEle.value);


	addrShow.value=provinces[provEle.value]+"-"+(cities[provEle.value])[cityEle.value]+"-"+(((districts[provEle.value]))[cityEle.value])[disEle.value];


}
	
</script>